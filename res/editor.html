{{template "header" .}}
{{template "navbar" .}}

<link rel="stylesheet" href="/static/css/editormd.css" />


<div style="padding-top: 70px">

<div class="container">

<form id="formm" method="post" action="/new">


<div class="row">
	<div class="col-md-11" >
	 <input type="text" class="form-control input-lg" id="title" name="title" placeholder="标题"/>
	</div>
	<div class="col-md-1" >
	 <input type="button" class="btn btn-primary btn-lg" value="提交" onclick="submitt()"/>
	</div>
</div>
<input type="hidden" name="html" id="html"/>
<input type="hidden" name="md" id="md"/>
<input type="hidden" name="token" id="token" value="{{.token}}"/>

</form>

<br>
<div class="row" >
	<div class="col-md-12" >
		<div id="test-editormd">		
		<textarea style="display:none;" id="editor"></textarea>
		</div>
	</div>
</div>
</div>

 <script src="/static/js/jquery.min.js"></script>
 <script src="/static/js/editormd.min.js"></script>

 <script type="text/javascript">
	var testEditor;

     $(function() {
         testEditor = editormd("test-editormd", {
             width:"100%",
             height  : 640,
             syncScrolling : "single",
             path    : "/static/lib/",
			saveHTMLToTextarea : true

         });
		//testEditor.getMarkdown();       // 获取 Markdown 源码
		//testEditor.getHTML();           // 获取 Textarea 保存的 HTML 源码
		//testEditor.getPreviewedHTML();  // 获取预览窗口里的 HTML，在开启 watch 且没有开启 saveHTMLToTextarea 时使用
     });
	
	function submitt(){
		//验证表单
		
		//表单赋值
		var md=testEditor.getMarkdown(); 
		var html=testEditor.getHTML();
		
		$("#md").attr("value",md);
		$("#html").attr("value",html);
		
		//提交表单
		$("#formm").submit();
	}
 </script>
